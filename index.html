<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>üöó Coche de Emily</title>
    <style>
        body {
            background-color: #222;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            overflow: hidden;
            touch-action: none;
        }
        h1 { margin-top: 10px; font-size: 20px; color: #FFD700; }
        p { font-size: 14px; color: #ccc; }
        
        #gameArea {
            position: relative;
            width: 100%;
            max-width: 400px;
            height: 600px;
            background-color: #444;
            margin: 0 auto;
            border-left: 5px solid white;
            border-right: 5px solid white;
            overflow: hidden;
            border-radius: 10px;
        }

        /* El coche */
        #player {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 50px;
            transition: left 0.1s;
            z-index: 10;
        }

        /* Obst√°culos */
        .obstacle {
            position: absolute;
            font-size: 40px;
            text-align: center;
        }

        /* Mensajes flotantes al chocar */
        .floating-msg {
            position: absolute;
            font-weight: bold;
            color: #ffeb3b; /* Amarillo alerta pero suave */
            background-color: rgba(0,0,0,0.7); /* Fondo oscuro para leer bien */
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 18px; /* Un poco m√°s peque√±o para que quepa la frase larga */
            animation: floatUp 2s ease-out forwards; /* Animaci√≥n m√°s lenta (2s) para leer */
            z-index: 20;
            width: 250px; /* M√°s ancho para la frase larga */
            text-align: center;
            pointer-events: none;
            left: 50%;
            transform: translateX(-50%); /* Centrado */
        }

        @keyframes floatUp {
            0% { opacity: 1; margin-top: 0; }
            100% { opacity: 0; margin-top: -100px; }
        }

        #scoreBoard {
            font-size: 18px;
            margin: 10px;
        }
    </style>
</head>
<body>

    <h1>‚ú® El Coche Recuperador ‚ú®</h1>
    <p>Toca los lados para moverte.<br>¬°A ver qu√© pasa si chocas!</p>
    
    <div id="gameArea">
        <div id="player">üèéÔ∏è</div>
    </div>

    <script>
        const gameArea = document.getElementById('gameArea');
        const player = document.getElementById('player');
        
        let playerX = 50; 
        let gameActive = true;

        // --- LAS FRASES QUE PEDISTE ---
        const mensajesCuidado = [
            "V√©s amb compte la propera vegada ‚ö†Ô∏è",
            "Descansa üõå"
        ];

        // Controles Teclado
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' && playerX > 10) playerX -= 10;
            if (e.key === 'ArrowRight' && playerX < 90) playerX += 10;
            updatePlayer();
        });

        // Controles M√≥vil
        gameArea.addEventListener('touchstart', (e) => {
            const touchX = e.touches[0].clientX;
            const screenMiddle = window.innerWidth / 2;
            if (touchX < screenMiddle && playerX > 10) playerX -= 15;
            else if (touchX > screenMiddle && playerX < 90) playerX += 15;
            updatePlayer();
        });

        function updatePlayer() {
            player.style.left = playerX + '%';
        }

        function createObstacle() {
            if (!gameActive) return;

            const obs = document.createElement('div');
            obs.classList.add('obstacle');
            obs.innerHTML = Math.random() > 0.5 ? 'üöß' : 'üõë'; 
            obs.style.left = Math.floor(Math.random() * 80 + 10) + '%';
            obs.style.top = '-50px';
            gameArea.appendChild(obs);

            let obsY = -50;
            let obsTimer = setInterval(() => {
                if (!gameActive) { clearInterval(obsTimer); return; }
                
                obsY += 5;
                obs.style.top = obsY + 'px';

                // Detectar Choque
                const playerRect = player.getBoundingClientRect();
                const obsRect = obs.getBoundingClientRect();

                if (
                    playerRect.left < obsRect.right &&
                    playerRect.right > obsRect.left &&
                    playerRect.top < obsRect.bottom &&
                    playerRect.bottom > obsRect.top
                ) {
                    // AL CHOCAR:
                    clearInterval(obsTimer);
                    gameArea.removeChild(obs); // Quitamos el obst√°culo
                    mostrarMensaje(playerRect.left, playerRect.top); // Ense√±amos mensaje
                }

                if (obsY > 600) {
                    clearInterval(obsTimer);
                    if (obs.parentNode) gameArea.removeChild(obs);
                }
            }, 20);

            setTimeout(createObstacle, 1200); 
        }

        function mostrarMensaje(x, y) {
            // Elegir aleatoriamente entre las dos frases
            const textoElegido = mensajesCuidado[Math.floor(Math.random() * mensajesCuidado.length)];
            
            const msg = document.createElement('div');
            msg.classList.add('floating-msg');
            msg.innerText = textoElegido;
            
            // Posicionar el mensaje donde ocurri√≥ el choque
            const areaRect = gameArea.getBoundingClientRect();
            // Centramos el mensaje respecto al choque (ajuste visual)
            let msgX = (x - areaRect.left) - 100; // -100 para centrar el cuadro de 200px
            let msgY = (y - areaRect.top) - 60;
            
            msg.style.left = "50%"; // Centrado en pantalla para leer mejor la frase larga
            msg.style.transform = "translateX(-50%)";
            msg.style.top = msgY + 'px';
            
            gameArea.appendChild(msg);

            // Borrar mensaje a los 2 segundos
            setTimeout(() => {
                if (msg.parentNode) gameArea.removeChild(msg);
            }, 2000);
        }

        // Iniciar
        createObstacle();

    </script>
</body>
</html>